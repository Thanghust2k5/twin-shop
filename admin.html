<!-- 
===================================================================================
   ADMIN.HTML - TRANG QU·∫¢N TR·ªä VI√äN (ADMIN DASHBOARD)
===================================================================================
   
   M·ª§C ƒê√çCH:
   Trang qu·∫£n l√Ω to√†n b·ªô h·ªá th·ªëng e-commerce d√†nh cho admin/seller.
   Cho ph√©p:
   - Xem th·ªëng k√™ t·ªïng quan (Dashboard)
   - Qu·∫£n l√Ω s·∫£n ph·∫©m (CRUD)
   - Qu·∫£n l√Ω ƒë∆°n h√†ng (xem, duy·ªát, giao, h·ªßy)
   - Qu·∫£n l√Ω danh m·ª•c, v·∫≠n chuy·ªÉn, thanh to√°n
   - Xem danh s√°ch kh√°ch h√†ng v√† ƒë√°nh gi√°
   - Chat h·ªó tr·ª£ kh√°ch h√†ng realtime

   QUY·ªÄN TRUY C·∫¨P:
   - Ch·ªâ user c√≥ role = 'admin' m·ªõi truy c·∫≠p ƒë∆∞·ª£c
   - Ki·ªÉm tra trong admin.js ‚Üí n·∫øu kh√¥ng ph·∫£i admin ‚Üí redirect

   C·∫§U TR√öC TRANG:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  SIDEBAR (B√™n tr√°i)       ‚îÇ      MAIN CONTENT              ‚îÇ
   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
   ‚îÇ  ‚îÇ  Logo: TWIN SHOP    ‚îÇ  ‚îÇ  ‚îÇ  Header: Ti√™u ƒë·ªÅ tab     ‚îÇ ‚îÇ
   ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ
   ‚îÇ  ‚îÇ  üìä T·ªïng Quan       ‚îÇ  ‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üì¶ S·∫£n Ph·∫©m        ‚îÇ  ‚îÇ  ‚îÇ  TAB CONTENT             ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üìã ƒê∆°n H√†ng        ‚îÇ  ‚îÇ  ‚îÇ  (Dashboard, Products,   ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üìÅ Danh M·ª•c        ‚îÇ  ‚îÇ  ‚îÇ   Orders, Categories,    ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üöö V·∫≠n Chuy·ªÉn      ‚îÇ  ‚îÇ  ‚îÇ   Shipping, Payment,     ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üí≥ Thanh To√°n      ‚îÇ  ‚îÇ  ‚îÇ   Users, Reviews, Chat)  ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üë• Kh√°ch H√†ng      ‚îÇ  ‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  ‚≠ê ƒê√°nh Gi√°        ‚îÇ  ‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
   ‚îÇ  ‚îÇ  üí¨ Chat H·ªó Tr·ª£     ‚îÇ  ‚îÇ  ‚îÇ                          ‚îÇ ‚îÇ
   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

   MODALS:
   - modal-product: Th√™m/s·ª≠a s·∫£n ph·∫©m
   - modal-simple: Th√™m/s·ª≠a danh m·ª•c, v·∫≠n chuy·ªÉn, thanh to√°n
   - modal-detail: Xem chi ti·∫øt t·ªïng qu√°t
   - modal-order-invoice: Xem h√≥a ƒë∆°n chi ti·∫øt ƒë∆°n h√†ng

   FILES LI√äN QUAN:
   - admin.css: Style ri√™ng cho trang admin
   - admin.js: Logic x·ª≠ l√Ω t·∫•t c·∫£ c√°c tab
   - admin-chat.js: Logic chat realtime v·ªõi Socket.io
   - validation.js: H√†m validate form
   - Chart.js: Th∆∞ vi·ªán v·∫Ω bi·ªÉu ƒë·ªì
   - Socket.io: Realtime chat
=================================================================================== 
-->
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Twin Shop - K√™nh Ng∆∞·ªùi B√°n</title>
    <link rel="icon" type="image/png" href="./assets/img/logo_favicon.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <link rel="stylesheet" href="./assets/css/admin.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- ==============================================
         SIDEBAR - MENU ƒêI·ªÄU H∆Ø·ªöNG B√äN TR√ÅI
         ==============================================
         Menu c·ªë ƒë·ªãnh b√™n tr√°i m√†n h√¨nh
         Click v√†o item ‚Üí switchTab() ‚Üí hi·ªán tab t∆∞∆°ng ·ª©ng
    ============================================== -->
    <div class="sidebar">
      <!-- Logo -->
      <div class="brand">
        <i class="fa-solid fa-bag-shopping"></i> TWIN SHOP
      </div>
      
      <!-- Menu Items -->
      <div class="menu-item active" onclick="switchTab('dashboard', this)">
        <i class="fa-solid fa-gauge-high"></i> T·ªïng Quan
      </div>
      <div class="menu-item" onclick="switchTab('products', this)">
        <i class="fa-solid fa-box"></i> S·∫£n Ph·∫©m
      </div>
      <div class="menu-item" onclick="switchTab('orders', this)">
        <i class="fa-solid fa-file-invoice-dollar"></i> ƒê∆°n H√†ng
      </div>
      <div class="menu-item" onclick="switchTab('categories', this)">
        <i class="fa-solid fa-layer-group"></i> Danh M·ª•c
      </div>
      <div class="menu-item" onclick="switchTab('shipping', this)">
        <i class="fa-solid fa-truck"></i> V·∫≠n Chuy·ªÉn
      </div>
      <div class="menu-item" onclick="switchTab('payment', this)">
        <i class="fa-solid fa-credit-card"></i> Thanh To√°n
      </div>
      <div class="menu-item" onclick="switchTab('users', this)">
        <i class="fa-solid fa-users"></i> Kh√°ch H√†ng
      </div>
      <div class="menu-item" onclick="switchTab('reviews', this)">
        <i class="fa-solid fa-comment-dots"></i> ƒê√°nh Gi√°
      </div>
      <!-- Chat c√≥ badge hi·ªÉn th·ªã s·ªë tin nh·∫Øn m·ªõi -->
      <div class="menu-item" onclick="switchTab('chat', this)">
        <i class="fa-solid fa-comments"></i> Chat H·ªó Tr·ª£
        <span class="chat-badge" id="admin-chat-badge" style="display:none">0</span>
      </div>
    </div>

    <!-- ==============================================
         MAIN - PH·∫¶N N·ªòI DUNG CH√çNH B√äN PH·∫¢I
         ==============================================
    -->
    <div class="main">
      <div class="header">
        <h3 id="page-title">T·ªïng Quan</h3>
        <a href="index.html" target="_blank" style="text-decoration: none; color: #ee4d2d; font-weight: 500;">
          <i class="fa-solid fa-share-from-square"></i> Xem Website
        </a>
      </div>
      
      <div class="content">
        <!-- ==============================================
             TAB 1: DASHBOARD - T·ªîNG QUAN
             ==============================================
             Hi·ªÉn th·ªã th·ªëng k√™ t·ªïng quan:
             - 4 th·∫ª stat: Doanh thu, ƒê∆°n h√†ng, S·∫£n ph·∫©m, Kh√°ch h√†ng
             - Bi·ªÉu ƒë·ªì doanh thu 7 ng√†y
             - Bi·ªÉu ƒë·ªì tr√≤n t·ªâ l·ªá ƒë∆°n h√†ng
             - B·∫£ng ƒë∆°n h√†ng m·ªõi nh·∫•t
             - B·∫£ng s·∫£n ph·∫©m s·∫Øp h·∫øt h√†ng
        ============================================== -->
        <div id="tab-dashboard" class="section active">
          <div class="cards-grid">
            <!-- Th·∫ª Doanh Thu -->
            <div class="card-stat">
              <div class="stat-info">
                <h3 id="stat-revenue">0ƒë</h3>
                <p>Doanh Thu</p>
              </div>
              <div class="stat-icon icon-revenue">
                <i class="fa-solid fa-money-bill-wave"></i>
              </div>
            </div>
            <!-- Th·∫ª ƒê∆°n H√†ng -->
            <div class="card-stat">
              <div class="stat-info">
                <h3 id="stat-orders">0</h3>
                <p>ƒê∆°n H√†ng</p>
              </div>
              <div class="stat-icon icon-orders">
                <i class="fa-solid fa-cart-shopping"></i>
              </div>
            </div>
            <!-- Th·∫ª S·∫£n Ph·∫©m -->
            <div class="card-stat">
              <div class="stat-info">
                <h3 id="stat-products">0</h3>
                <p>S·∫£n Ph·∫©m</p>
              </div>
              <div class="stat-icon icon-products">
                <i class="fa-solid fa-box-open"></i>
              </div>
            </div>
            <!-- Th·∫ª Kh√°ch H√†ng -->
            <div class="card-stat">
              <div class="stat-info">
                <h3 id="stat-users">0</h3>
                <p>Kh√°ch H√†ng</p>
              </div>
              <div class="stat-icon icon-users">
                <i class="fa-solid fa-user-group"></i>
              </div>
            </div>
          </div>
          
          <!-- Container bi·ªÉu ƒë·ªì -->
          <div class="charts-container">
            <!-- Bi·ªÉu ƒë·ªì doanh thu 7 ng√†y (Line/Bar Chart) -->
            <div class="chart-box">
              <div class="chart-header">
                <h4>Doanh Thu (7 Ng√†y)</h4>
              </div>
              <div style="height: 300px">
                <canvas id="revenueChart"></canvas>
              </div>
            </div>
            <!-- Bi·ªÉu ƒë·ªì tr√≤n t·ªâ l·ªá ƒë∆°n h√†ng (Pie Chart) -->
            <div class="chart-box">
              <div class="chart-header">
                <h4>T·ªâ L·ªá ƒê∆°n H√†ng</h4>
              </div>
              <div style="height: 250px; display: flex; justify-content: center">
                <canvas id="pieChart"></canvas>
              </div>
            </div>
          </div>
          
          <!-- B·∫£ng d·ªØ li·ªáu -->
          <div class="dash-tables">
            <!-- B·∫£ng ƒë∆°n h√†ng m·ªõi nh·∫•t -->
            <div class="panel">
              <h4>ƒê∆°n H√†ng M·ªõi Nh·∫•t</h4>
              <table>
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Kh√°ch</th>
                    <th>T·ªïng ti·ªÅn</th>
                    <th>Tr·∫°ng th√°i</th>
                  </tr>
                </thead>
                <tbody id="dash-orders"></tbody>
              </table>
            </div>
            <!-- B·∫£ng s·∫£n ph·∫©m s·∫Øp h·∫øt h√†ng -->
            <div class="panel">
              <h4>S·∫Øp H·∫øt H√†ng (10)</h4>
              <table>
                <thead>
                  <tr>
                    <th>·∫¢nh</th>
                    <th>T√™n</th>
                    <th>Kho</th>
                  </tr>
                </thead>
                <tbody id="dash-low-stock"></tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- ==============================================
             TAB 2: QU·∫¢N L√ù S·∫¢N PH·∫®M
             ==============================================
             - Toolbar: T√¨m ki·∫øm + s·∫Øp x·∫øp
             - B·∫£ng danh s√°ch s·∫£n ph·∫©m
             - Pagination
             - N√∫t th√™m s·∫£n ph·∫©m ‚Üí m·ªü modal
        ============================================== -->
        <div id="tab-products" class="section">
          <div class="panel">
            <div class="panel-header">
              <h4>Qu·∫£n L√Ω S·∫£n Ph·∫©m</h4>
              <!-- N√∫t th√™m s·∫£n ph·∫©m m·ªõi -->
              <button class="btn btn-add" onclick="openProductModal('add')">+ Th√™m S·∫£n Ph·∫©m</button>
            </div>
            <!-- Toolbar: T√¨m ki·∫øm + s·∫Øp x·∫øp -->
            <div class="toolbar">
              <input type="text" id="prod-search" placeholder="T√¨m t√™n s·∫£n ph·∫©m..." style="width: 250px;" onkeyup="if(event.key==='Enter') loadProducts()">
              <!-- Dropdown s·∫Øp x·∫øp -->
              <select id="prod-sort" onchange="loadProducts()">
                <option value="newest">M·ªõi nh·∫•t</option>
                <option value="name_asc">T√™n (A-Z)</option>
                <option value="name_desc">T√™n (Z-A)</option>
                <option value="price_asc">Gi√° tƒÉng d·∫ßn</option>
                <option value="price_desc">Gi√° gi·∫£m d·∫ßn</option>
                <option value="stock_asc">T·ªìn kho √≠t nh·∫•t</option>
                <option value="stock_desc">T·ªìn kho nhi·ªÅu nh·∫•t</option>
                <option value="id_desc">ID gi·∫£m d·∫ßn</option>
                <option value="id_asc">ID tƒÉng d·∫ßn</option>
              </select>
              <button onclick="loadProducts()">
                <i class="fa-solid fa-magnifying-glass"></i> T√¨m
              </button>
            </div>
            <!-- B·∫£ng danh s√°ch s·∫£n ph·∫©m -->
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>·∫¢nh</th>
                  <th>T√™n s·∫£n ph·∫©m</th>
                  <th>Gi√°</th>
                  <th>Kho</th>
                  <th>H√†nh ƒë·ªông</th>
                </tr>
              </thead>
              <!-- admin.js s·∫Ω render rows v√†o ƒë√¢y -->
              <tbody id="product-list"></tbody>
            </table>
            <!-- Pagination ph√¢n trang -->
            <div id="product-pagination" class="pagination"></div>
          </div>
        </div>
        
        <!-- ==============================================
             TAB 3: QU·∫¢N L√ù ƒê∆†N H√ÄNG
             ==============================================
             - Toolbar: T√¨m ki·∫øm + l·ªçc theo tr·∫°ng th√°i
             - B·∫£ng danh s√°ch ƒë∆°n h√†ng
             - Actions: Xem chi ti·∫øt, duy·ªát, giao, h·ªßy
        ============================================== -->
        <div id="tab-orders" class="section">
          <div class="panel">
            <h4>Danh S√°ch ƒê∆°n H√†ng</h4>
            <div class="toolbar">
              <input type="text" id="order-search" placeholder="T√¨m t√™n ng∆∞·ªùi nh·∫≠n..." style="width: 250px;" onkeyup="if(event.key==='Enter') loadOrders()">
              <!-- Dropdown l·ªçc theo tr·∫°ng th√°i -->
              <select id="order-status" onchange="loadOrders()">
                <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                <option value="pending">Ch·ªù duy·ªát</option>
                <option value="shipping">ƒêang giao</option>
                <option value="completed">Ho√†n th√†nh</option>
                <option value="cancelled">ƒê√£ h·ªßy</option>
              </select>
              <button onclick="loadOrders()">
                <i class="fa-solid fa-filter"></i> L·ªçc
              </button>
            </div>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Kh√°ch h√†ng</th>
                  <th>Ng√†y ƒë·∫∑t</th>
                  <th>T·ªïng ti·ªÅn</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>H√†nh ƒë·ªông</th>
                </tr>
              </thead>
              <tbody id="order-list"></tbody>
            </table>
          </div>
        </div>
        
        <!-- ==============================================
             TAB 4: QU·∫¢N L√ù KH√ÅCH H√ÄNG
             ==============================================
             Hi·ªÉn th·ªã danh s√°ch t·∫•t c·∫£ users
             - T√¨m ki·∫øm theo t√™n, email, SƒêT
        ============================================== -->
        <div id="tab-users" class="section">
          <div class="panel">
            <h4>Danh S√°ch Kh√°ch H√†ng</h4>
            <div class="toolbar">
              <input type="text" id="user-search" placeholder="T√¨m t√™n, email, s·ªë ƒëi·ªán tho·∫°i..." style="width: 300px;" onkeyup="if(event.key==='Enter') loadUsers()">
              <button onclick="loadUsers()">
                <i class="fa-solid fa-magnifying-glass"></i> T√¨m
              </button>
            </div>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>H·ªç t√™n</th>
                  <th>Email</th>
                  <th>SƒêT</th>
                  <th>Vai tr√≤</th>
                </tr>
              </thead>
              <tbody id="user-list"></tbody>
            </table>
          </div>
        </div>
        
        <!-- ==============================================
             TAB 5: QU·∫¢N L√ù DANH M·ª§C
             ==============================================
             CRUD danh m·ª•c s·∫£n ph·∫©m
        ============================================== -->
        <div id="tab-categories" class="section">
          <div class="panel">
            <div class="panel-header">
              <h4>Danh M·ª•c</h4>
              <button class="btn btn-add" onclick="openSimpleModal('category', 'add')">+ Th√™m</button>
            </div>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>T√™n</th>
                  <th>M√¥ t·∫£</th>
                  <th>H√†nh ƒë·ªông</th>
                </tr>
              </thead>
              <tbody id="category-list"></tbody>
            </table>
          </div>
        </div>
        
        <!-- ==============================================
             TAB 6: QU·∫¢N L√ù ƒê√ÅNH GI√Å
             ==============================================
             Hi·ªÉn th·ªã danh s√°ch reviews t·ª´ kh√°ch h√†ng
             C√≥ th·ªÉ x√≥a review kh√¥ng ph√π h·ª£p
        ============================================== -->
        <div id="tab-reviews" class="section">
          <div class="panel">
            <h4>ƒê√°nh Gi√° S·∫£n Ph·∫©m</h4>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Kh√°ch</th>
                  <th>S·∫£n ph·∫©m</th>
                  <th>Sao</th>
                  <th>N·ªôi dung</th>
                  <th>X√≥a</th>
                </tr>
              </thead>
              <tbody id="review-list"></tbody>
            </table>
          </div>
        </div>

        <!-- ==============================================
             TAB 7: CHAT H·ªñ TR·ª¢ KH√ÅCH H√ÄNG
             ==============================================
             Giao di·ªán chat realtime v·ªõi Socket.io
             - B√™n tr√°i: Danh s√°ch phi√™n chat
             - B√™n ph·∫£i: Khung chat chi ti·∫øt
        ============================================== -->
        <div id="tab-chat" class="section">
          <div class="admin-chat-container">
            <!-- Danh s√°ch phi√™n chat -->
            <div class="chat-sessions-panel">
              <div class="chat-sessions-header">
                <h4><i class="fa-solid fa-comments"></i> Cu·ªôc tr√≤ chuy·ªán</h4>
                <span class="session-count" id="session-count">0</span>
              </div>
              <div class="chat-sessions-list" id="chat-sessions-list">
                <div class="no-sessions">
                  <i class="fa-regular fa-comments"></i>
                  <p>Ch∆∞a c√≥ cu·ªôc tr√≤ chuy·ªán n√†o</p>
                </div>
              </div>
            </div>

            <!-- Khung chat chi ti·∫øt -->
            <div class="chat-detail-panel" id="chat-detail-panel">
              <!-- Placeholder khi ch∆∞a ch·ªçn chat n√†o -->
              <div class="chat-detail-placeholder">
                <i class="fa-regular fa-comment-dots"></i>
                <p>Ch·ªçn m·ªôt cu·ªôc tr√≤ chuy·ªán ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
              </div>
              
              <!-- Khi c√≥ chat ƒë∆∞·ª£c ch·ªçn -->
              <div class="chat-detail-active" id="chat-detail-active" style="display:none">
                <!-- Header: Th√¥ng tin user ƒëang chat -->
                <div class="chat-detail-header">
                  <div class="chat-user-info"> 
                    <div class="chat-user-avatar">
                      <i class="fa-solid fa-user"></i>
                    </div>
                    <div>
                      <div class="chat-user-name" id="chat-user-name">Kh√°ch h√†ng</div>
                      <div class="chat-user-status" id="chat-user-status">
                        <span class="status-dot online"></span> ƒêang tr·ª±c tuy·∫øn
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Container tin nh·∫Øn -->
                <div class="chat-detail-messages" id="admin-chat-messages">
                  <!-- Messages s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
                </div>
                
                <!-- Input g·ª≠i tin nh·∫Øn --> 
                <div class="chat-detail-input">
                  <input type="text" id="admin-chat-input" placeholder="Nh·∫≠p tin nh·∫Øn..." 
                         onkeypress="if(event.key==='Enter') AdminChat.sendMessage()" />
                  <button class="btn btn-add" onclick="AdminChat.sendMessage()">
                    <i class="fa-solid fa-paper-plane"></i> G·ª≠i
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==============================================
             TAB 8: QU·∫¢N L√ù V·∫¨N CHUY·ªÇN
             ==============================================
             CRUD ph∆∞∆°ng th·ª©c v·∫≠n chuy·ªÉn
        ============================================== -->
        <div id="tab-shipping" class="section">
          <div class="panel">
            <div class="panel-header">
              <h4>V·∫≠n Chuy·ªÉn</h4>
              <button class="btn btn-add" onclick="openSimpleModal('shipping', 'add')">+ Th√™m</button>
            </div>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>T√™n</th>
                  <th>Gi√°</th>
                  <th>H√†nh ƒë·ªông</th>
                </tr>
              </thead>
              <tbody id="shipping-list"></tbody>
            </table>
          </div>
        </div>
        
        <!-- ==============================================
             TAB 9: QU·∫¢N L√ù THANH TO√ÅN
             ==============================================
             CRUD ph∆∞∆°ng th·ª©c thanh to√°n
        ============================================== -->
        <div id="tab-payment" class="section">
          <div class="panel">
            <div class="panel-header">
              <h4>Thanh To√°n</h4>
              <button class="btn btn-add" onclick="openSimpleModal('payment', 'add')">+ Th√™m</button>
            </div>
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>T√™n</th>
                  <th>Code</th>
                  <th>H√†nh ƒë·ªông</th>
                </tr>
              </thead>
              <tbody id="payment-list"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ==============================================
         MODAL 1: TH√äM/S·ª¨A S·∫¢N PH·∫®M
         ==============================================
         Form ƒë·∫ßy ƒë·ªß ƒë·ªÉ th√™m ho·∫∑c ch·ªânh s·ª≠a s·∫£n ph·∫©m:
         - T√™n, gi√°, t·ªìn kho
         - Danh m·ª•c
         - ·∫¢nh ƒë·∫°i di·ªán + ·∫£nh ph·ª•
         - M√¥ t·∫£
    ============================================== -->
    <div id="modal-product" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-product-title">Th√™m S·∫£n Ph·∫©m</h3>
          <i class="fa-solid fa-xmark" style="cursor: pointer" onclick="closeModal('modal-product')"></i>
        </div>
        <form id="form-product">
          <!-- Hidden input l∆∞u ID khi edit -->
          <input type="hidden" id="p-id" />
          
          <!-- T√™n s·∫£n ph·∫©m -->
          <div class="form-group auth-form__input-wrap">
            <label>T√™n s·∫£n ph·∫©m</label>
            <input type="text" id="p-name" class="auth-form__input" required />
          </div>
          
          <!-- Gi√° + Kho (2 c·ªôt) -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
            <div class="form-group auth-form__input-wrap">
              <label>Gi√° ti·ªÅn</label>
              <input type="number" id="p-price" class="auth-form__input" required />
            </div>
            <div class="form-group auth-form__input-wrap">
              <label>Kho</label>
              <input type="number" id="p-stock" class="auth-form__input" value="100" />
            </div>
          </div>
          
          <!-- Danh m·ª•c + ·∫¢nh ƒë·∫°i di·ªán -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
            <div class="form-group">
              <label>Danh m·ª•c</label>
              <!-- Dropdown render t·ª´ API /categories -->
              <select id="p-category"></select>
            </div>
            <div class="form-group">
              <label>·∫¢nh ƒë·∫°i di·ªán</label>
              <input type="file" id="p-thumbnail" />
            </div>
          </div>
          
          <!-- ·∫¢nh ph·ª• (multiple) -->
          <div class="form-group">
            <label>·∫¢nh ph·ª•:</label>
            <input type="file" id="p-images" multiple />
          </div>
          
          <!-- M√¥ t·∫£ s·∫£n ph·∫©m -->
          <div class="form-group">
            <label>M√¥ t·∫£</label>
            <textarea id="p-desc" rows="3"></textarea>
          </div>
          
          <!-- N√∫t h√†nh ƒë·ªông -->
          <div style="text-align: right">
            <button type="button" class="btn" style="background: #eee; color: #333" onclick="closeModal('modal-product')">H·ªßy</button>
            <button type="submit" class="btn btn-add">L∆∞u</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- ==============================================
         MODAL 2: TH√äM/S·ª¨A DANH M·ª§C / V·∫¨N CHUY·ªÇN / THANH TO√ÅN
         ==============================================
         Modal ƒë∆°n gi·∫£n d√πng chung cho 3 lo·∫°i:
         - Category: T√™n + M√¥ t·∫£
         - Shipping: T√™n + Gi√°
         - Payment: T√™n + Code
    ============================================== -->
    <div id="modal-simple" class="modal">
      <div class="modal-content" style="width: 400px">
        <div class="modal-header">
          <h3 id="simple-title">Th√™m M·ªõi</h3>
          <i class="fa-solid fa-xmark" onclick="closeModal('modal-simple')"></i>
        </div>
        <form id="form-simple">
          <!-- Hidden inputs ƒë·ªÉ bi·∫øt type + ID -->
          <input type="hidden" id="simple-type" />
          <input type="hidden" id="simple-id" />
          
          <!-- Field 1: T√™n -->
          <div class="form-group">
            <label id="lbl-1">T√™n</label>
            <input type="text" id="inp-1" required />
          </div>
          
          <!-- Field 2: M√¥ t·∫£ / Gi√° / Code (t√πy type) -->
          <div class="form-group">
            <label id="lbl-2">M√¥ t·∫£</label>
            <input type="text" id="inp-2" />
          </div>
          
          <div style="text-align: right">
            <button type="submit" class="btn btn-add">L∆∞u</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- ==============================================
         MODAL 3: XEM CHI TI·∫æT T·ªîNG QU√ÅT
         ==============================================
         Modal hi·ªÉn th·ªã th√¥ng tin chi ti·∫øt
    ============================================== -->
    <div id="modal-detail" class="modal">
      <div class="modal-content modal-invoice">
        <div class="modal-header">
          <h3 id="detail-title">Chi Ti·∫øt</h3>
          <i class="fa-solid fa-xmark" onclick="closeModal('modal-detail')"></i>
        </div>
        <!-- Content ƒë∆∞·ª£c render b·ªüi JavaScript -->
        <div id="detail-content"></div>
      </div>
    </div>

    <!-- ==============================================
         MODAL 4: H√ìA ƒê∆†N CHI TI·∫æT ƒê∆†N H√ÄNG
         ==============================================
         Hi·ªÉn th·ªã h√≥a ƒë∆°n ƒë·∫πp c√≥ th·ªÉ in
         Bao g·ªìm:
         - Header: Logo + S·ªë h√≥a ƒë∆°n
         - Th√¥ng tin kh√°ch h√†ng + ƒë∆°n h√†ng
         - B·∫£ng s·∫£n ph·∫©m
         - T·ªïng k·∫øt thanh to√°n
         - Footer: Th√¥ng tin li√™n h·ªá
    ============================================== -->
    <div id="modal-order-invoice" class="modal">
      <div class="modal-content modal-invoice-content">
        <!-- Wrapper c√≥ th·ªÉ in -->
        <div class="invoice-wrapper" id="invoice-printable">
          <!-- Header H√≥a ƒê∆°n -->
          <div class="invoice-header">
            <div class="invoice-logo">
              <i class="fa-solid fa-bag-shopping"></i>
              <span>TWIN SHOP</span>
            </div>
            <div class="invoice-title">
              <h2>H√ìA ƒê∆†N B√ÅN H√ÄNG</h2>
              <p id="invoice-number">S·ªë: #000</p>
            </div>
          </div>

          <!-- Th√¥ng tin ƒë∆°n h√†ng (2 c·ªôt) -->
          <div class="invoice-info">
            <div class="invoice-info-row">
              <!-- C·ªôt tr√°i: Th√¥ng tin kh√°ch h√†ng -->
              <div class="invoice-info-col">
                <h4>Th√¥ng tin kh√°ch h√†ng</h4>
                <p><strong>H·ªç t√™n:</strong> <span id="inv-customer-name">---</span></p>
                <p><strong>ƒêi·ªán tho·∫°i:</strong> <span id="inv-customer-phone">---</span></p>
                <p><strong>ƒê·ªãa ch·ªâ:</strong> <span id="inv-customer-address">---</span></p>
              </div>
              <!-- C·ªôt ph·∫£i: Th√¥ng tin ƒë∆°n h√†ng -->
              <div class="invoice-info-col">
                <h4>Th√¥ng tin ƒë∆°n h√†ng</h4>
                <p><strong>Ng√†y ƒë·∫∑t:</strong> <span id="inv-order-date">---</span></p>
                <p><strong>Tr·∫°ng th√°i:</strong> <span id="inv-order-status">---</span></p>
                <p><strong>Thanh to√°n:</strong> <span id="inv-payment-method">---</span></p>
              </div>
            </div>
          </div>

          <!-- B·∫£ng s·∫£n ph·∫©m -->
          <div class="invoice-items">
            <table class="invoice-table">
              <thead>
                <tr>
                  <th style="width:5%">STT</th>
                  <th style="width:40%">S·∫£n ph·∫©m</th>
                  <th style="width:15%">Ph√¢n lo·∫°i</th>
                  <th style="width:10%">SL</th>
                  <th style="width:15%">ƒê∆°n gi√°</th>
                  <th style="width:15%">Th√†nh ti·ªÅn</th>
                </tr>
              </thead>
              <!-- Rows render b·ªüi JavaScript -->
              <tbody id="inv-items-body">
              </tbody>
            </table>
          </div>

          <!-- T·ªïng k·∫øt -->
          <div class="invoice-summary">
            <!-- Ghi ch√∫ ƒë∆°n h√†ng (b√™n tr√°i) -->
            <div class="invoice-note">
              <h4>Ghi ch√∫ ƒë∆°n h√†ng:</h4>
              <p id="inv-note">Kh√¥ng c√≥ ghi ch√∫</p>
              <!-- L√Ω do h·ªßy (n·∫øu c√≥) -->
              <div id="inv-cancel-reason-wrap" style="display:none; margin-top:10px;">
                <h4 style="color:#ee4d2d;">L√Ω do h·ªßy:</h4>
                <p id="inv-cancel-reason" style="color:#ee4d2d;">---</p>
              </div>
            </div>
            <!-- T·ªïng ti·ªÅn (b√™n ph·∫£i) -->
            <div class="invoice-totals">
              <div class="invoice-total-row">
                <span>T·∫°m t√≠nh:</span>
                <span id="inv-subtotal">0‚Ç´</span>
              </div>
              <div class="invoice-total-row">
                <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>
                <span id="inv-shipping">0‚Ç´</span>
              </div>
              <div class="invoice-total-row">
                <span>Gi·∫£m gi√°:</span>
                <span id="inv-discount">-0‚Ç´</span>
              </div>
              <div class="invoice-total-row total-final">
                <span>T·ªîNG C·ªòNG:</span>
                <span id="inv-total">0‚Ç´</span>
              </div>
            </div>
          </div>

          <!-- Footer H√≥a ƒê∆°n -->
          <div class="invoice-footer">
            <p>C·∫£m ∆°n qu√Ω kh√°ch ƒë√£ mua h√†ng t·∫°i Twin Shop!</p>
            <p>Hotline: 1900 1234 | Email: support@twinshop.vn</p>
          </div>
        </div>

        <!-- N√∫t h√†nh ƒë·ªông -->
        <div class="invoice-actions">
          <button class="btn" style="background:#eee;color:#333" onclick="closeModal('modal-order-invoice')">ƒê√≥ng</button>
          <!-- N√∫t in h√≥a ƒë∆°n -->
          <button class="btn btn-add" onclick="printInvoice()"><i class="fa-solid fa-print"></i> In H√≥a ƒê∆°n</button>
        </div>
      </div>
    </div>

    <!-- ==============================================
         JAVASCRIPT FILES
         ==============================================
         Th·ª© t·ª± load quan tr·ªçng:
         1. validation.js - H√†m validate form
         2. Socket.io - Th∆∞ vi·ªán realtime chat
         3. admin.js - Logic ch√≠nh trang admin:
            - switchTab() - Chuy·ªÉn tab
            - loadProducts/Orders/Users() - Load d·ªØ li·ªáu
            - openProductModal() - M·ªü modal th√™m/s·ª≠a SP
            - saveProduct() - L∆∞u s·∫£n ph·∫©m
            - updateOrderStatus() - C·∫≠p nh·∫≠t ƒë∆°n h√†ng
         4. admin-chat.js - Logic chat realtime:
            - AdminChat.init() - Kh·ªüi t·∫°o Socket.io
            - AdminChat.joinSession() - Join v√†o phi√™n chat
            - AdminChat.sendMessage() - G·ª≠i tin nh·∫Øn
    ============================================== -->
    <script src="./assets/js/validation.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="./assets/js/admin.js"></script>
    <script src="./assets/js/admin-chat.js"></script>
  </body>
</html>